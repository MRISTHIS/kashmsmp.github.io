<!DOCTYPE html>
<html lang="en-US">
<head>
<style>

@import url('https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&display=swap');

/* GLOBAL */
body {
    background-color: #000000;
    background-image: url("i3yosyphyvl31.png");
    background-size: auto;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    background-attachment: fixed;
    cursor: crosshair;
    font-family: "Silkscreen", sans-serif;
    margin: 0;
    padding: 0;
}

/* MINECRAFT PANEL STYLE */
.mc-panel {
    background: rgba(34, 255, 34, 0.25);
    border: 4px solid #3a5f0b;
    border-radius: 6px;
    padding: 20px;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 0 4px #1e3a05, 0 4px 12px rgba(0,0,0,0.4);
    image-rendering: pixelated;
    margin-bottom: 25px;
}

/* HEADER */
#header {
    width: 95%;
    height: 80px;
    margin: 160px auto 20px auto;
    position: relative;
}

#logo {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 380px;
    filter: drop-shadow(4px 4px 0 #C70C02);
    z-index: 20;
}

#siting {
    position: absolute;
    top: -120px;
    left: 50%;
    transform: translateX(-50%);
    filter: drop-shadow(6px 6px 0 #09010078);
}

#siting img {
    width: 150px;
}

/* SPLASH TEXT */
@keyframes splashBounce {
    0%   { transform: translateX(-50%) rotate(-10deg) scale(0.9); }
    50%  { transform: translateX(-50%) rotate(-10deg) scale(1); }
    100% { transform: translateX(-50%) rotate(-10deg) scale(0.9); }
}

#splash {
    position: absolute;
    top: 60px;
    left: 60%;
    transform: translateX(-50%) rotate(-10deg);
    font-size: 25px;
    color: #ffff00;
    text-shadow: 3px 3px #000000;
    animation: splashBounce 1.5s ease-in-out infinite;
    z-index: 33;
}

/* NAVBAR */
#navbar {
    width: 95%;
    margin: 20px auto;
    padding: 10px;
    display: flex;
    justify-content: center;
    gap: 30px;

    background: rgba(34, 255, 34, 0.25);
    border: 4px solid #3a5f0b;
    border-radius: 6px;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 0 4px #1e3a05, 0 4px 12px rgba(0,0,0,0.4);
}

#navbar a {
    color: black;
    font-size: 24px;
    text-decoration: none;
    padding: 6px 12px;
    border: 2px solid #1e3a05;
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
    transition: 0.15s;
}

#navbar a:hover {
    background: rgba(255,255,255,0.4);
    transform: scale(1.05);
}

/* NEWS PAGE */
.news-title {
    color: #fff;
    text-shadow: 2px 2px #000;
    margin-top: 0;
}

.news-date {
    font-size: 18px;
    color: #fff;
    text-shadow: 2px 2px #000;
}

.news-text {
    color: #fff;
    text-shadow: 2px 2px #000;
    font-size: 18px;
}

    .char {
    position: relative;
    display: inline-block;
    margin: 0 20px;
}

.nametag {
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.6);
    padding: 4px 8px;
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    text-shadow: 2px 2px #000;
    white-space: nowrap;
    image-rendering: pixelated;
}


</style>
</head>

<body>

<!-- HEADER -->
<div id="header" class="mc-panel">
    <div id="splash"></div>
    <img id="logo" src="Kashm.png">
     <img id="logo" src="Kashm.png" alt="Kashm logo">
        <div id="siting"> <div class="char"> <img src="Untitled (1000 x 1000 px).png"> <span class="nametag">MRISTHIS</span> </div> <div class="char"> <img src="lethal.png"> <span class="nametag">Mr Mystery</span> </div> </div>
    </div>
</div>

<!-- NAVBAR -->
<div id="navbar">
    <a href="index.html">Home</a>
    <a href="News.html">News</a>
    <a href="rules.html">Rules</a>
    <a href="GrailDiary.html">Grail Diary</a>
    <a href="Cards.html">Cards</a>
</div>

<!-- AUTO NEWS -->
<div id="newsContainer" style="width:90%; margin:40px auto;"></div>

<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSEH2rpLOr4B0Xami7UgcpDBjE0uSskBs_yD3sJnPQeQNEuDxSw2lb6TWtZ7hd7rdK78CTSJwnEq9kV/pub?output=csv";

function parseCSV(text) {
    const rows = [];
    let current = "";
    let inQuotes = false;
    const lines = text.split("\n");

    for (let line of lines) {
        let row = [];
        current = "";
        inQuotes = false;

        for (let i = 0; i < line.length; i++) {
            const char = line[i];
            if (char === '"' ) {
                if (inQuotes && line[i+1] === '"') {
                    current += '"';
                    i++;
                } else {
                    inQuotes = !inQuotes;
                }
            } else if (char === ',' && !inQuotes) {
                row.push(current);
                current = "";
            } else {
                current += char;
            }
        }
        row.push(current);
        if (row.length > 1 || row[0].trim() !== "") {
            rows.push(row);
        }
    }
    return rows;
}

function buildNews(csvText) {
    const rows = parseCSV(csvText);
    if (rows.length < 2) return;

    const headers = rows[0].map(h => h.trim().toLowerCase());
    const dataRows = rows.slice(1);

    const container = document.getElementById("newsContainer");
    container.innerHTML = "<h2 class='news-title'>ðŸ”¥ Latest News</h2>";

    dataRows.reverse().forEach(cols => {
        if (cols.every(c => c.trim() === "")) return;

        const obj = {};
        headers.forEach((h, i) => {
            obj[h] = cols[i] ? cols[i].trim() : "";
        });

        const title = obj["title"] || "Untitled";
        const date = obj["date"] || "";
        const content = obj["content"] || "";

        const div = document.createElement("div");
        div.className = "mc-panel";

        div.innerHTML = `
            <h3 class="news-title">${title}</h3>
            <p class="news-date"><b>Date:</b> ${date}</p>
            <p class="news-text">${content.replace(/\n/g, "<br>")}</p>
        `;

        container.appendChild(div);
    });
}

fetch(csvUrl)
    .then(res => res.text())
    .then(text => buildNews(text))
    .catch(err => {
        document.getElementById("newsContainer").innerHTML =
            "<div class='mc-panel'>Unable to load news right now.</div>";
    });

/* SPLASH */
const splashes = [
    "Breaking News!",
    "Fresh Updates!",
    "Server Expanding!",
    "New Features!",
    "Stay Informed!",
    "Epic Announcements!",
    "What's New!",
    "Hot Off The Press!",
    "Latest SMP News!",
    "Big Changes!"
];

document.getElementById("splash").textContent =
    splashes[Math.floor(Math.random() * splashes.length)];
</script>

</body>
</html>
